# Copy this file to .env and fill in real values.
# .env is git-ignored — never commit real credentials.
# Lines marked ⚠️ COST mean the service charges after the free tier is exceeded.

PORT=8000
MONGO_URI=mongodb://localhost:27017/fintech
# MongoDB Atlas M0 free cluster: 512MB, 100 connections — https://www.mongodb.com/atlas

# ============================================================
# SENDBIRD (required)
# Free tier: 100 MAU, 1000 channels — https://dashboard.sendbird.com
# ============================================================
SENDBIRD_APP_ID=your-sendbird-app-id
# SENDBIRD_API_TOKEN: a Sub API token — used for platform API calls (send messages, manage channels)
SENDBIRD_API_TOKEN=your-sendbird-sub-api-token
# SENDBIRD_MASTER_API_TOKEN: the MASTER token from Dashboard → Settings → General → API tokens
# ⚠️  This must be the MASTER token — Sendbird signs webhooks with this, not sub tokens.
SENDBIRD_MASTER_API_TOKEN=your-sendbird-master-api-token
SENDBIRDDESKAPITOKEN=your-sendbird-desk-api-token

# ============================================================
# REDIS (optional — free tier options below)
# Without Redis: in-memory fallback is used (resets on restart, no cross-pod sharing)
#
# LOCAL DEV:
#   brew install redis && redis-server
#   # OR: docker run -p 6379:6379 redis:alpine
#
# PRODUCTION (free):
#   Redis Cloud free tier — 30MB, no credit card: https://redis.com/try-free/
#   Upstash Redis free tier — 10k commands/day: https://upstash.com/
#   ⚠️  Render Redis add-on is PAID ($7/month) — use Redis Cloud instead.
# ============================================================
REDIS_URL=redis://localhost:6379

# ============================================================
# OPENAI — Hybrid LLM Intent Engine
# ⚠️  COST: ~$0.00015/1k input tokens (gpt-4o-mini). Budget guard below.
# Get key: https://platform.openai.com/api-keys
# ============================================================
OPENAI_API_KEY=sk-your-openai-api-key-here
# Safety limit: LLM calls stop when this USD amount is reached.
# Adjust upward only when you're ready to spend more.
OPENAI_BUDGET_USD=5.00

# ============================================================
# STRIPE (optional — leave blank for demo mode, no real payments)
# Test keys start with sk_test_ — safe for sandbox only.
# ⚠️  COST: 2.9% + $0.30 per real transaction (test mode: free)
# ============================================================
STRIPE_SECRET_KEY=sk_test_your-stripe-secret-key
STRIPE_WEBHOOK_SECRET=whsec_your-stripe-webhook-secret
FRONTEND_URL=https://your-frontend.vercel.app

# ============================================================
# HUBSPOT (optional — skip to disable HubSpot ticket creation)
# HubSpot CRM is free for up to 1M contacts.
# ============================================================
HUBSPOT_TOKEN=your-hubspot-private-app-token

# ============================================================
# TELEGRAM BOT (optional — enables /telegram-webhook)
# Telegram Bot API is completely FREE with no rate limits.
#
# SETUP:
# 1. Open Telegram → message @BotFather
# 2. Send /newbot → follow prompts → copy the token
# 3. After deploying, register webhook once:
#    curl -X POST "https://api.telegram.org/bot<TOKEN>/setWebhook" \
#      -d '{"url":"https://your-app.onrender.com/telegram-webhook"}'
# 4. Enable via admin dashboard: TELEGRAM_ENABLED = true
# ============================================================
TELEGRAM_BOT_TOKEN=1234567890:ABCdefGHIjklMNOpqrSTUvwxYZ

# ============================================================
# FIREBASE FCM — Push Notifications (optional)
# FCM is completely FREE on Firebase Spark (free) plan.
# ⚠️  Do NOT upgrade to Blaze plan unless you need other Firebase services.
#
# SETUP:
# 1. Go to https://console.firebase.google.com/
# 2. Create project → Project Settings → Service accounts
# 3. Generate new private key → download JSON
# 4. Save as: config/firebase.json  (already git-ignored)
# 5. Set the path below
# 6. Enable via admin dashboard: PUSH_NOTIFICATIONS_ENABLED = true
# ============================================================
FIREBASE_CONFIG_PATH=./config/firebase.json

# ============================================================
# AWS S3 — File Uploads (optional)
# ⚠️  COST: Free for 12 months (5GB, 20k GET, 2k PUT/month).
#          After 12 months: ~$0.023/GB storage.
#
# SETUP:
# 1. Create AWS account: https://aws.amazon.com/free/
# 2. S3 → Create bucket (block all public access: ON)
# 3. IAM → Create user → Attach AmazonS3FullAccess policy
# 4. Security credentials → Create access key
# 5. Enable via admin dashboard: S3_UPLOADS_ENABLED = true
# ============================================================
AWS_ACCESS_KEY_ID=AKIA...
AWS_SECRET_ACCESS_KEY=your-secret-access-key
AWS_BUCKET_NAME=your-bucket-name
AWS_REGION=us-east-1

# ============================================================
# ADMIN DASHBOARD — GET /admin
# Protected by HTTP Basic Auth.
# ⚠️  Use a strong password in production.
# Always use HTTPS (Render provides this automatically).
# ============================================================
ADMIN_USERNAME=admin
ADMIN_PASSWORD=changeme-use-a-strong-password

# ============================================================
# PER-USER RATE LIMITING (Redis-based sliding window)
# ============================================================
USER_RATE_LIMIT_MIN=10    # max messages per user per minute
USER_RATE_LIMIT_DAY=100   # max messages per user per day

# ============================================================
# AGENT-AWAY FALLBACK TIMER
# ============================================================
AGENT_REPLY_TIMEOUT_MS=30000   # ms before "agent is away" message (default: 30s)
